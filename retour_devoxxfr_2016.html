<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Retour DevoxxFR 2016</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="idm139962608016064"></a>Retour DevoxxFR 2016</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Raphaël</span> <span class="surname">Flores</span></h3><code class="email">&lt;<a class="email" href="mailto:raphael.flores@versailles.inra.fr">raphael.flores@versailles.inra.fr</a>&gt;</code></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#_git_protips_hol">1. Git ProTips (HoL)</a></span></dt><dt><span class="section"><a href="#_spring_boot_1_3_pour_le_web">2. Spring Boot 1.3 pour le web</a></span></dt><dt><span class="section"><a href="#_feign_ant_in_action">3. Feign(ant) in Action</a></span></dt><dt><span class="section"><a href="#_apache_maven_java_9_et_le_projet_jigsaw">4. Apache Maven, Java 9 et le projet Jigsaw -</a></span></dt><dt><span class="section"><a href="#_containers_vms_processes_isolation_performances_i_o_comment_ces_technologies_fonctionnent_et_comment_les_différencier">5. Containers, VMs, Processes… Isolation, performances, I/O… Comment ces technologies fonctionnent et comment les différencier?</a></span></dt><dt><span class="section"><a href="#_retours_sur_java_8">6. Retours sur Java 8</a></span></dt><dt><span class="section"><a href="#_100_stateless_avec_jwt_json_web_token">7. 100% Stateless avec JWT (JSON Web Token)</a></span></dt><dt><span class="section"><a href="#_faire_découvrir_la_programmation_aux_enfants_un_atelier_à_la_fois">8. Faire découvrir la programmation aux enfants, un atelier à la fois</a></span></dt><dt><span class="section"><a href="#_elasticsearch_et_hibernate_sont_sur_un_bateau_8230">9. Elasticsearch et Hibernate sont sur un bateau…</a></span></dt><dt><span class="section"><a href="#_comment_asciidoctor_peut_vous_aider_pour_votre_doc">10. Comment Asciidoctor peut vous aider pour votre doc</a></span></dt><dt><span class="section"><a href="#_the_eclipse_ide_the_force_awakens">11. The Eclipse IDE: The Force Awakens</a></span></dt><dd><dl><dt><span class="section"><a href="#_neon_juin_2016">11.1. Neon (juin 2016)</a></span></dt><dt><span class="section"><a href="#_java_tooling">11.2. Java Tooling</a></span></dt><dt><span class="section"><a href="#_web_tooling_neon">11.3. Web tooling NEON</a></span></dt><dt><span class="section"><a href="#_container_tooling">11.4. Container tooling</a></span></dt><dt><span class="section"><a href="#_oxygen_juin_2017">11.5. Oxygen (juin 2017)</a></span></dt></dl></dd><dt><span class="section"><a href="#_microservices_irl_ça_fonctionne_chez_un_client_on_vous_dit_comment">12. Microservices IRL: ça fonctionne chez un client, on vous dit comment!</a></span></dt><dt><span class="section"><a href="#_hibernate_tu_connais_8230_mais_en_fait_tu_connais_pas">13. Hibernate tu connais… mais en fait tu connais pas</a></span></dt><dt><span class="section"><a href="#_jigsaw_est_là_pour_nous_sauver">14. Jigsaw est là pour nous sauver</a></span></dt><dt><span class="section"><a href="#_l_8217_odyssée_du_continuous_delivery">15. L’odyssée du Continuous Delivery</a></span></dt><dt><span class="section"><a href="#_conclusion">16. Conclusion</a></span></dt></dl></div><p>Bonjour à tous,</p><p>J'étais la semaine <span class="line-through">dernière</span> d’avant à la conférence DevoxxFR 2016 sur Paris. Le <a class="ulink" href="http://devoxx.fr/agenda/2016" target="_top">programme</a> était très chargé et les choix parfois difficiles (il y a juste un créneau ou 2 auxquels je n’ai pas trouvé de talk très intéressant, a priori).</p><p>Je vous propose de vous partager ce que j’ai vu et entendu, en reprenant ci-dessous chacun des talks que j’ai suivi dans l’ordre chronologique.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_git_protips_hol"></a>1. Git ProTips (HoL)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/AWB-3163/Git_ProTips_%28HoL%29" target="_top">http://cfp.devoxx.fr/2016/talk/AWB-3163/Git_ProTips_%28HoL%29</a>
</li><li class="listitem">
Slides : <a class="ulink" href="http://tdd.github.io/devoxx-git-protips/" target="_top">http://tdd.github.io/devoxx-git-protips/</a>
</li><li class="listitem">
Documentation de référence commande par commande : <a class="ulink" href="https://git-scm.com/docs" target="_top">https://git-scm.com/docs</a>
</li><li class="listitem">
Blog dédié à Git, maintenu an partie par l’orateur : <a class="ulink" href="http://www.git-attitude.fr/archives/" target="_top">http://www.git-attitude.fr/archives/</a>
</li></ul></div><p>Ce talk était très intéressant et l’orateur très vif et bien en verve, du genre :</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>Moi, j’aime bien le <code class="literal">rm -fr</code>, le <code class="literal">rm</code> français.</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
Christophe Porteneuve
</span></td></tr></table></div><p>Il est revenu sur ce qu’est censé être un bon commit : un commit doit être atomique, homogène, compréhensible, peu défectueux. En somme il doit correspondre à un, et un seul sujet, le message doit être clair et s’exprimer en quelques mots.</p><p>Dans la même logique, si un message de commit contient des <code class="literal">+</code> ou <code class="literal">&amp;</code> ou plusieurs lignes, c’est probablement que le sujet n’est pas assez bien défini et qu’il faudrait le couper en plusieurs commits (et ça se fait !)</p><p>Un crédo à retenir : committez (<code class="literal">commit</code>) souvent, poussez (<code class="literal">push</code>) avec parcimonie ! Un commit, tant qu’il est en local uniquement, peut se réécrire, même de manière très chirurgicale, mais une fois qu’il est poussé… juste ne réécrivez pas l’historique, c’est pas cool, mais vraiment vraiment pas cool pour les autres commiteurs du projet.</p><p>Il est revenu sur l’attitude à avoir avant tout commit. Avant tout commit, il est indispensable de lancer un <code class="literal">git status</code>. Il faut bien regarder le retour du <code class="literal">git status</code> avant tout commit. Un <code class="literal">git status</code> fournit plein d’informations super utiles. <code class="literal">git status</code> est ton ami, il te dit même les commandes les plus probables à lancer. <code class="literal">git status</code> pourrait t’insulter, mais non, <code class="literal">git status</code> est cool, il te parle bien et te suggère la suite à donner à tes actions selon chaque contexte.
Bref. Quelle commande faut-il faire avant un commit ?</p><p>Comme il est bon de savoir ce que l’on est sur le point de commiter, il est toujours indispensable de lancer un <a class="ulink" href="https://git-scm.com/docs/git-diff" target="_top"><code class="literal">git diff</code></a>. Et les sorties de <code class="literal">git diff</code> étant un brutes de fonderie, voici comment les rendre un peu plus lisibles… installez <code class="literal">npm</code> sur votre bécanne, puis configurez votre diff comme suit (attention à désactiver toute personnalisation de diff que vous auriez faite avant, sinon ça risque de ne pas faire joli du tout) :</p><pre class="programlisting">npm install -g diff-so-fancy
git config --global color.diff always
git config --global color.diff.meta yellow bold
git config --global color.diff.frag magenta bold
git config --global color.diff.whitespace red reverse
git config --global pager.diff "diff-so-fancy | less --tabs=2 -RFX"
git config --global pager.show "diff-so-fancy | less --tabs=2 -RFX"</pre><p>D’autres options utiles (la documentation de référence décrit plus précisément toutes les <a class="ulink" href="https://git-scm.com/docs/git-config" target="_top">options de configuration</a>) :</p><pre class="programlisting">git config --global status.showUntrackedFiles all       # permet d'afficher un à un les fichiers non gérés par git, en allant plus loin que le répertoire, il affiche TOUS les fichiers.

git config --global diff.mnemonixPrefix true    # lors d'un diff permet de préfixer les fichiers différents selon leur localisation git (commit/index/workspace) au lieu de a/b (pas très parlant)

git diff --word-diff    # make diff displaying inline modifs

git config --global diff.wordRegex .    # allows to target diff at each character

git diff -w     # ignore all whitespaces in diff (no option available for that)

git show :0:toto        # :0 targets the "toto" staged file

git diff --stat         # affiche fichier par fichier la quantité de modif

git diff --dirstat      # affiche en pourcentage les modifications effectuées - par défaut n'affiche que les fichiers comptant pour au moins 3% des modifications - configurable en spécifiant : --dirstat=5 pour monter à 5%</pre><p>Ah… et pour tous les fichiers générés qu’il ne faudrait pas versionner, utiliser le site <a class="ulink" href="http://gitignore.io/" target="_top">gitignore.io</a> pour générer des fichier <code class="literal">.gitignore</code> aux petits oignons selon les technologies utilisées, idéal pour le 1er commit !</p><p>Ah oui, un rappel qui ne fait pas de mal. À quoi correspondent les différents zones logiques de git ? Voici une <a class="ulink" href="http://ndpsoftware.com/git-cheatsheet.html" target="_top">cheat sheet très visuelle</a>, indispensable à connaître !</p><p>Souvent, on est dans le cas où un même fichier contient plusieurs modifications qui devraient aterrir dans 2 commits distincts. C’est pas grave, on peut sélectionner facilement quelle partie du fichier on souhaite intégrer au prochain commit en laissant les autres modifications dans le workspace :</p><pre class="programlisting">git add -p file         # permet de splitter les modifications en sélectionnant les morceaux modifiés pour les envoyer dans des commits distincts.</pre><p>Donc, une fois qu’on a ajouté tout ce qu’on souhaite, on est prêt à <a class="ulink" href="https://git-scm.com/docs/git-commit" target="_top">commiter</a>. Si on a oublié un fichier ou qu’on a fait une typo dans le dernier message de commit, pas grave, on peut jouer avec l’option <code class="literal">--amend</code> de <code class="literal">git commit</code>.</p><p>Pour s’aider dans la lecture de l’historique git (log) il propose de formatter un peu mieux la sortie :</p><pre class="programlisting">LOG_FORMAT='%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%an %ad)%Creset'
git config --global alias.lg "log --graph --date=relative --pretty=tformat:'$LOG_FORMAT'"
git config --global log.abbrevCommit true
git config --global log.follow true</pre><p>Le <a class="ulink" href="https://git-scm.com/docs/git-log" target="_top">log</a> remonte le temps à partir d’un ou plusieurs points, le plus récent d’abord (chronologie inverse). Notez qu’on peut apparaître facilement comme un <code class="literal">Master of Git</code> en réécrivant correctement nos commits, mais en local, car toutes (vraiment toutes) les manipulations de versionnement sont visibles dans le <code class="literal">reflog</code>. Une fois poussés par contre les commits sont visibles de manière atomique par le serveur :</p><pre class="programlisting">git reflog      # affiche l'ensemble des états commités (amendés ou pas) en local uniquement, cet état affiche toutes les opérations effectuées sur le poste local</pre><p>Pour diverses raisons, il peut être utile de retrouver l’origine d’une modification survenue dans le code. La commande <code class="literal">git blame</code> peut venir à l’esprit rapidement, mais elle est très imparfaite car elle n’affiche que la dernière modification et elle ne permet pas de visualiser les suppressions. Préférer utiliser :</p><pre class="programlisting">git log -S
git log --diff-filter=&lt;pattern&gt;</pre><p>Et encore plus précis, on peut même suivre les modifications d’un bloc de code existant et remonter dans tous les commits qui l’ont modifié. Il suffit de préciser les lignes actuelles dans le fichier :</p><pre class="programlisting">git log -L 'method_name:file_path'      # trace l'historique d'un bloc de code, d'une méthode (bloc entouré par des accollades) du fichier
git log -L '3,10:file_path'     # utilise les numéros de lignes actuels et remonte l'hitorique ayant modifié tout ce qui existe actuellement entre ces numéros de lignes.</pre><p>Viens ensuite la question du <a class="ulink" href="https://git-scm.com/docs/git-rebase" target="_top"><code class="literal">git rebase</code></a>. La fâcheuse fonction qui fait peur !</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>Fear the Rebase Day!</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
Moi
</span></td></tr></table></div><p>N’empêche, le rebase permet de réordonner, redécouper et réappliquer les commits de manière chirurgicale. C’est une commande puissante qu’il est conseillé de lancer en mode intéractif (<code class="literal">git rebase -i</code>). Je vous renvoie <a class="ulink" href="http://tdd.github.io/devoxx-git-protips/?utm_source=porteneuve&amp;utm_medium=slides&amp;utm_campaign=devoxxfr-2016#/interactive-rebase-intro" target="_top">aux slides</a> directement.</p><p>Ensuite, l’orateur est revenu sur <a class="ulink" href="http://tdd.github.io/devoxx-git-protips/#/push-pull-traps" target="_top">les pièges de <code class="literal">pull</code> &amp; <code class="literal">push</code></a>. Un <code class="literal">fetch</code> récupère dans le dépôt local tous les objets &amp; références du dépôt distant, bien. En revanche, le <code class="literal">pull</code> va un peu plus loin et en plus de récupérer les objets localement, il lance une fusion de ces objets avec les branches locales ! Ce qui peut poser des soucis selon la configuration du client git…</p><p>Voilà voilà, je vous laisse aller lire la fin des slides vu qu’on n’a pas eu l’occasion de tout tester. Mais si vous êtes arrivés jusque là, eh bien chapeau ! \o/</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_spring_boot_1_3_pour_le_web"></a>2. Spring Boot 1.3 pour le web</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/XFE-1586/Spring_Boot_1.3_pour_le_web" target="_top">http://cfp.devoxx.fr/2016/talk/XFE-1586/Spring_Boot_1.3_pour_le_web</a>
</li><li class="listitem">
Slides : <a class="ulink" href="https://speakerdeck.com/snicoll/spring-boot-1-dot-3-pour-le-web" target="_top">https://speakerdeck.com/snicoll/spring-boot-1-dot-3-pour-le-web</a>
</li><li class="listitem">
Projet Git avec les exemples, gérés avec des step-by-step commit : <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni" target="_top">https://github.com/snicoll-demos/spring-boot-4tw-uni</a>
</li><li class="listitem">
Vidéo du talk équivalent réalisé à Devoxx Belgium : <a class="ulink" href="https://www.youtube.com/watch?v=7cemYpV1fNI" target="_top">https://www.youtube.com/watch?v=7cemYpV1fNI</a>
</li></ul></div><p>Ce talk était un peu moins passionnant que le premier, les orateurs étaient devant un public plus large et à l'évidence moins à l’aise. Néanmoins le contenu était intéressant, voici les notes un peu brutes de décoffrage que j’ai retirée.</p><p>Ils sont partis du besoin suivant : gérer les clés de propriétés d’une version à l’autre des releases de Spring Boot. Et ils ont montré code à l’appui comment répondre au problème avec Spring Boot.</p><p>De manière générale, il est possible de construire des applications :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
sous la forme d’un WAR (web archive) qui doit être exécuté dans un conteneur de servlet comme Tomcat ou Jetty
</li><li class="listitem">
ou bien en tant que JAR exécutable (Java archive) qui embarque lui-même un conteneur de servlet et qui se lance en ligne de commande (ou via un service Unix…).
</li></ul></div><p>La forme du JAR exécutable est privilégiée car toute la configuration du conteneur de servlet est gérée par Spring Boot et embarquée dans l’application (ou via un fichier de configuration externe), ce qui garantit qu’une même archive sera utilisée pour la <code class="literal">dev</code>, la <code class="literal">rc</code> ou la <code class="literal">prod</code>, et donc limiter les différences entre les environnements.</p><p>Les bibliothèques Javascript sont souvent disponibles en tant qu’artéfact Maven (pour utilisation en tant que ressource statique embarquée) via les webjar, ex. : <code class="literal">org.webjar.jquery</code>.</p><p>Par défaut une page d’erreur est fournie par Spring Boot, elle moche, mais elle est <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/blob/fadca2780fb8a5c5af243dcc3d03d51a2e5c1f6b/spring-boot-4tw-web/src/main/java/demo/config/Application.java#L19" target="_top">personnalisable</a>.</p><p>La validation des formulaires est supportée avec la JSR 303 via des annotations, on peut même définir <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/blob/master/spring-boot-4tw-web/src/main/java/demo/config/validation/VersionValidator.java" target="_top">nos propres validateurs</a>.</p><p>Pour le web, on peut annoter une exception spécifique avec <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/blob/fadca2780fb8a5c5af243dcc3d03d51a2e5c1f6b/spring-boot-4tw-web/src/main/java/demo/config/service/VersionMisMatchException.java#L6" target="_top">un statut HTTP dédié</a>. Pour aller plus loin sur la gestion des Exception avec Spring : <a class="ulink" href="https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc" target="_top">https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc</a></p><p>Spring Boot 1.3 a introduit des DevTools (utilisable en tant que dépendance optionnelle) qui permet le rechargement à chaud, jusqu'à une actualisation de l’application dans le navigateur via un plugin qui fait le lien avec le code lorsqu’une sauvegarde est effectuée, grâce à Live Reload, <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/b3b1e522ce7da5e04b2a4c6dbc493c8f8cbd9476" target="_top">exemple</a>. Pour aller plus loin avec les DevTools : <a class="ulink" href="https://spring.io/blog/2015/06/17/devtools-in-spring-boot-1-3" target="_top">https://spring.io/blog/2015/06/17/devtools-in-spring-boot-1-3</a></p><p>Avec la dépendance à Actuator, il est possible d’exposer automatiquement plein de métriques relatives à l'état de l’application, son environnement, etc., <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a40cbe53ec4ac3ca88658b4f6e0f52cc4d1856eb" target="_top">exemple</a>.
De même qu’on a la possibilité <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a40cbe53ec4ac3ca88658b4f6e0f52cc4d1856eb#diff-9309ebd91edc15847a7140e2d17c68deR84" target="_top">d’exposer le hash du commit de la version compilée</a> (via une dépendance additionnelle non gérée par Spring).
Ou bien afficher des <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a40cbe53ec4ac3ca88658b4f6e0f52cc4d1856eb#diff-392573172d4a7000214e6936d591fed9R36" target="_top">métriques personnalisées</a>. On peut même envisager de le customiser pour interroger d’autres services et vérifier leur état.
Si besoin, ces métriques sont <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a40cbe53ec4ac3ca88658b4f6e0f52cc4d1856eb#diff-392573172d4a7000214e6936d591fed9R30" target="_top">exportables</a> (en JMX mais pas que) avec @Bean @ExportMetricWriter/</p><p>Spring Boot vient avec la gestion d’un <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a04d79b2f3680aeee0f5f8dd9420e04c64f61790#diff-9309ebd91edc15847a7140e2d17c68deR31" target="_top">cache applicatif</a> (utilisant par défaut des hash maps), mais on peut facilement spécifier un cache dédiée plus évolué (EHCache ou autre), il suffit de spsécifier la dépendance dans le <code class="literal">pom.xml</code>, mais l’intérêt c’est qu’on passe par la couche d’abstraction de Spring qui se charge de déléguer les instructions à chaque implémentation via l’API cache-api de <code class="literal">javax.cache</code></p><p>Naturellement, <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/044e7faf01b076c415fdb2d250ba9d9b4f3fa3e4" target="_top">l’intégration avec le PaaS maison est fournie</a>, ici CloudFoundry. Plus d’infos sur CloudFoundry (open source) : <a class="ulink" href="https://www.cloudfoundry.org/" target="_top">https://www.cloudfoundry.org/</a></p><p>Il est également possible de <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/a00a34fab2a3496c24e02269215687622727e50b" target="_top">gérer des ressources statiques qui sont localisées en dehors de l’arborescence du projet</a> et de surcharger le comportement par défaut en utilisant un profil (ici profil <code class="literal">dev</code>). Un <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/7d2653abe071aa6ef8f79ba286a50c69f7be195d#diff-9309ebd91edc15847a7140e2d17c68deR113" target="_top">autre exemple de gestion de profil, pour la production par exemple</a> avec le fichier de configuration adéquat.</p><p>Il est simplissime d’activer la <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/056609af50a71f63cb3bfb01707404e7b6ea64bb#diff-3cf0f96cb5d68d3e26d80dd590daf6b6R4" target="_top">compression côté serveur</a> pour certains types de fichiers.</p><p>Pour des services web, plutôt que de retourner un contenu (JSON) complet, il est possible de restreindre certaines propriétés du JSON avec les <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/056609af50a71f63cb3bfb01707404e7b6ea64bb#diff-468cd002cb5d9b127aa346a6b0d265c0R39" target="_top">JsonView de Jackson</a>.</p><p>La gestion des <span class="emphasis"><em>Cross-origin resource sharing</em></span> (CORS - spécification de sécurité du W3C qui fait qu’un navigateur n’ira pas chercher via du code Javascript des ressources localisées sur un autre domaine qui a servi la page web) est simplissime avec SpringBoot, <a class="ulink" href="https://github.com/snicoll-demos/spring-boot-4tw-uni/commit/86823beabb6a082dc7b4053cd109fd5db7158a5f#diff-f87526001fc9e0d9eb38a49a91e11fbaR12" target="_top">en 1 ligne, c’est réglé !</a>
Notez que la gestion peut se configurer à 3 endroits :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
au niveau d’une méthode spécifique
</li><li class="listitem">
au niveau d’un Controler complet
</li><li class="listitem">
ou de manière globale à l’application
</li></ul></div><p>Pour aller plus loin : <a class="ulink" href="https://spring.io/blog/2015/06/08/cors-support-in-spring-framework" target="_top">https://spring.io/blog/2015/06/08/cors-support-in-spring-framework</a> et <a class="ulink" href="https://spring.io/guides/gs/rest-service-cors/" target="_top">https://spring.io/guides/gs/rest-service-cors/</a></p><p>Enfin concernant le packaging… en tant que JAR exécutable, une application Spring Boot peut s’installer en tant que service Linux (au choix <code class="literal">init.d</code> ou <code class="literal">systemd</code>) très simplement, pour aller plus loin : <a class="ulink" href="https://docs.spring.io/spring-boot/docs/1.3.0.RELEASE/reference/htmlsingle/deployment-service" target="_top">https://docs.spring.io/spring-boot/docs/1.3.0.RELEASE/reference/htmlsingle/deployment-service</a> #</p><p>Pour aller encore plus loin, la doc de référence de Spring Boot 1.3.0 : <a class="ulink" href="https://docs.spring.io/spring-boot/docs/1.3.0.RELEASE/reference/htmlsingle/" target="_top">https://docs.spring.io/spring-boot/docs/1.3.0.RELEASE/reference/htmlsingle/</a></p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_feign_ant_in_action"></a>3. Feign(ant) in Action</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/OOT-8042/Feign%28ant%29_in_Action" target="_top">http://cfp.devoxx.fr/2016/talk/OOT-8042/Feign%28ant%29_in_Action</a>
</li><li class="listitem">
Slides : <a class="ulink" href="https://speakerdeck.com/ilaborie/feign-live" target="_top">https://speakerdeck.com/ilaborie/feign-live</a>
</li><li class="listitem">
Dé<a class="ulink" href="mailto:mo-live@Github" target="_top">mo-live@Github</a> : <a class="ulink" href="https://github.com/ilaborie/feign-live" target="_top">https://github.com/ilaborie/feign-live</a>
</li><li class="listitem">
<a class="ulink" href="mailto:Feign@Github" target="_top">Feign@Github</a> : <a class="ulink" href="https://github.com/Netflix/feign#feign-makes-writing-java-http-clients-easier" target="_top">https://github.com/Netflix/feign#feign-makes-writing-java-http-clients-easier</a>
</li></ul></div><p>Feign est un client HTTP très simple qui permet d’interroger des webservice Restful (ou pas) exposant des données textuelles.</p><p>Les requêtes asynchrones ne sont pas natives à Feign, mais le JDK 8 avec les <a class="ulink" href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html" target="_top"><code class="literal">CompletableFuture</code></a> (<a class="ulink" href="http://blog.octo.com/java-8-est-reactif/" target="_top">exemple</a>) permet d’introduire le concept.</p><p>De manière générale, si la bibliothèque est très simple de base, elle est très extensible (via des modules) et supporte différentes implémentations pour l’encodage Json (<a class="ulink" href="https://github.com/Netflix/feign#gson" target="_top">(Gson/Jackson)</a> et XML <a class="ulink" href="https://github.com/Netflix/feign#sax" target="_top">(Sas/JAXB)</a>, et permet même de spécifier un client HTTP plus performant (<a class="ulink" href="https://github.com/Netflix/feign#okhttp" target="_top">OkHttp</a>), etc.
A garder en tête si l’on est amené à implémenter des clients Java pour nos webservices, ou bien pour des webservices distants.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_apache_maven_java_9_et_le_projet_jigsaw"></a>4. Apache Maven, Java 9 et le projet Jigsaw -</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/MKN-4721/Apache_Maven,_Java_9_et_le_projet_Jigsaw" target="_top">http://cfp.devoxx.fr/2016/talk/MKN-4721/Apache_Maven,_Java_9_et_le_projet_Jigsaw</a>
</li><li class="listitem">
Slides : <a class="ulink" href="https://speakerdeck.com/aheritier/fr-apache-maven-java-9-et-le-projet-jigsaw-at-devoxx-france-2016" target="_top">https://speakerdeck.com/aheritier/fr-apache-maven-java-9-et-le-projet-jigsaw-at-devoxx-france-2016</a>
</li><li class="listitem">
Code : <a class="ulink" href="https://github.com/MavenDemo/maven-java9-jigsaw-fr" target="_top">https://github.com/MavenDemo/maven-java9-jigsaw-fr</a>
</li></ul></div><p>Je vais faire court, les slides seront bien plus parlantes, mais en bref Jigsaw est une nouveauté à venir dans Java 9 qui consiste à modulariser le JDK et tout code Java.</p><p>Pour des raisons de performance (des modules plus petits seront plus faciles à embarquer), de sécurité (si une faille est découverte dans un module elle aura moins d’impact sur les autres modules et limitera sa portée), et de taille (la plateforme Java pourra être utilisée sur des périphériques restreints en mémoire).</p><p>Jigsaw tend à pouvoir gérer les relations entre modules, pour faire en sorte que le comportement soit cohérent à la compilation comme à l’exécution. Par contre, ça va rentrer en plein dans les opérations de Maven, du coup ils doivent préparer le terrain pour faire en sorte que tout ne soit pas cassé, surtout si ils souhaitent que Jigsaw soit adopté (aura-t-on le choix en même temps ?!)…</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_containers_vms_processes_isolation_performances_i_o_comment_ces_technologies_fonctionnent_et_comment_les_différencier"></a>5. Containers, VMs, Processes… Isolation, performances, I/O… Comment ces technologies fonctionnent et comment les différencier?</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/EMT-1932/Containers,_VMs,_Processes%E2%80%A6_Isolation,_performances,_I%2FO%E2%80%A6_Comment_ces_technologies_fonctionnent_et_comment_les_differencier%3F" target="_top">http://cfp.devoxx.fr/2016/talk/EMT-1932/Containers,_VMs,_Processes%E2%80%A6_Isolation,_performances,_I%2FO%E2%80%A6_Comment_ces_technologies_fonctionnent_et_comment_les_differencier%3F</a>
</li></ul></div><p>C'était une démo live avec des slides dans un terminal (si si !), des GIF animés dans tous les sens, mais très instructif !</p><p>Si je n’ai pas pris beaucoup de notes, c’est parce qu’il n’y avait pas beaucoup à noter, le CEO de <a class="ulink" href="https://www.clever-cloud.com/fr/" target="_top">Clever Cloud</a> ayant démontré en direct comment une image Docker pouvait accéder aux autres ressources du système hôte. Il a bien mis en avant que Docker ne répond pas du tout aux problématique de sécurité et d’isolation des processus, contrairement aux idées reçues, au contraire de machines virtuelles disposant notamment d’instructions dédiées au niveau matériel (CPU).</p><p>Bref, il a confirmé ce que nous avait déjà dit Mikaël il y a plus de 15 jours.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_retours_sur_java_8"></a>6. Retours sur Java 8</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/XBY-0882/Retours_sur_Java_8" target="_top">http://cfp.devoxx.fr/2016/talk/XBY-0882/Retours_sur_Java_8</a>
</li></ul></div><p>JM Doudoux (oui, lui-même !) a fait un retour sur l’utilisation de certaines des nouveautés de Java 8 et a présenté quelques bonnes pratiques (rappel, des vraies bonnes pratiques sont empiriques, contextuelles et mouvantes !). Ce qui suit nécessite une connaissance de Java 8 :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Optional
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
N’est pas sérialisable ⇒ à éviter en variable d’instance (d’autant que certains frameworks ne le prennent pas en compte)
</li><li class="listitem">
Eviter également dans les variables d’instance
</li><li class="listitem">
Eviter Optional&lt;Object[]&gt; ou Optional&lt;Collection&gt;
</li></ul></div></li><li class="listitem"><p class="simpara">
Parallel arrays
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
/!\ aux méthodes synchrones cachées dans les classes internes au JDK, si l’on veut paralléliser, il faut utiliser des thread différents, et il faut utiliser JMH pour benchmarker !
</li><li class="listitem">
Lambda
</li><li class="listitem">
utiliser des références de méthodes de préférence ? (System.out::println) plutôt que System.out:.println(…)
</li><li class="listitem">
les interfaces fonctionneles devraient lever des Runtime exception à spécifier dans un try/catch
</li></ul></div></li><li class="listitem"><p class="simpara">
Stream
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
bien adapté pour les collections, moins pour les map
</li><li class="listitem">
utiliser les classes de Stream pour les primitives (LongStream, IntStream, etc.)
</li><li class="listitem">
Attention à toujours limiter les Stream (Stream.limit(10)), autrement on risque des boucles infinies.
</li><li class="listitem">
Certaines sources de données ont des mauvaises performances en cas de SplitIterator, notamment les LinkedList
</li><li class="listitem">
Il ne faut paralléliser que si c’est vraiment indispensable, si le volume de données est assez conséquent, car les mécanismes de parallélisation font des opérations supplémentaires sous le capot.
</li></ul></div></li></ul></div><p>Beaucoup d’autres améliorations en Java 8, à évaluer également…</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_100_stateless_avec_jwt_json_web_token"></a>7. 100% Stateless avec JWT (JSON Web Token)</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/JEE-4171/100%25_Stateless_avec_JWT_%28JSON_Web_Token%29" target="_top">http://cfp.devoxx.fr/2016/talk/JEE-4171/100%25_Stateless_avec_JWT_%28JSON_Web_Token%29</a>
</li><li class="listitem">
JWT Introduction : <a class="ulink" href="https://jwt.io/introduction/" target="_top">https://jwt.io/introduction/</a>
</li></ul></div><p>La description du talk met en appêtit…</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>Dans nos architectures REST modernes, les bons vieux cookies de session ne suffisent plus. Il est temps de s’intéresser aux JSON Web Token : une nouvelle approche plus simple, 100% stateless et facilement scalable. Plus de stockage de session côté serveur. Plus de réplication de session sur le cluster. La consommation de multiples couches d’APIs avec une seule connexion devient plus simple.</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
Hubert Sablonnière
<em class="citetitle">DevoxxFR 2016</em>
</span></td></tr></table></div><p>Eh bien, j’en suis convaincu !</p><p>JWT permet d’introduire de la confiance entre le navigateur et le serveur. Historiquement, la confiance pouvait être implémentée via des identifiants de session, classique.</p><p>Les identifiants de session étant conservés en mémoire, dans des cas (clustering) où des clés de sessions ne sont pas disponibles sur tous les services. Un cache partagé pourrait résoudre le soucis, mais cela introduirait un <span class="emphasis"><em>Single Point of Failure</em></span> (SPOF). Par contre, on pourrait utiliser un cache distribué (type Redis ?).</p><p>JWT ne se compare pas à des cookies (moyen de transport), mais à des ID Sessions ! Il est généré et chiffré côté serveur.</p><p>Architecture d’JWT : <code class="literal">H34D3R.P4YL04D.S19N4TUR3</code> (encodé en Base64Url)
3 parties séparées par un point :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Header : contient des métadonnées sur le token, son type (JWT) et l’algorithme de hash utilisé
</li><li class="listitem">
Payload : les revendications (claims) du jeton
</li><li class="listitem">
Signature : permet de garantir le contenu et l’immuabilité du token
</li></ul></div><p>Payload est un JSON encodé qui contient des claims (réservés/publiques/privés):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
ISS: qui a émis le token
</li><li class="listitem">
SUB: identifiant métier
</li><li class="listitem">
AUD: audience (ie. token dédié au frontend?)
</li><li class="listitem">
EXP: date d’expiration
</li><li class="listitem">
JTI: identifiant unique de tout temps par le système qui a généré le token
</li></ul></div><p>Il n’y a plus que du calcul à faire une fois que le JWT a été généré : il suffit juste que la signature soit partagée sur tous les serveurs. Plus besoin d’accès base ou de partage d’identifiants à gérer, puisque le <span class="emphasis"><em>payload</em></span> permetpeuvent l’utiliser sans besoin d’accès base ou cache !</p><p>La signature peut se faire de manière symétrique, ou asymétrique (clés privée/publique) : la clé privée n’est utilisée que par le serveur d’authentification, mais tous les autres serveurs disposant de la clé publique peuvent déchiffrer les JWT transmis.</p><p>Comparaison avec d’autres systèmes :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Oauth2 échange les identifiants par référence et doit donc stocker les valeurs quelque part.
</li><li class="listitem">
OpenID-connect ? L’ID token de OpenId EST un JWT!
</li></ul></div><p>Inconvénients :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
quid de la révocation des jetons avant la date d’expiration ? Cela nécessite une base contenant les JTI (ID uniques !) à blacklister avant la date d’expiration. Mais ce n’est pas forcément nécessaire et dépend du contexte : se déloguer de la banque peut nécessiter de révoquer le JWT, mais si on est sur Facebook, ce n’est peut-être pas nécessaire.
</li><li class="listitem">
la façon d’injecter le JWT est importante pour éviter les XSS. Il est recommandé de passer le JWT par un Cookie HTTPS et d’utiliser des Cookies HttpOnly (non accessible par du code Javascript) ! Plus d’infos : <a class="ulink" href="https://www.owasp.org/index.php/HttpOnly" target="_top">https://www.owasp.org/index.php/HttpOnly</a>
</li><li class="listitem">
attaques CSRF: n’a pas compris…
</li></ul></div><p>Quels peuvent être d’autres usages ?</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
tout ce qu’on fait avec une session, on peut le faire avec un JWT (pour y ajouter des informations ou sauver l'état des actions d’un client)
</li><li class="listitem">
email de confirmation : on peut utiliser et envoyer le JWT dans l’email pour valider que le client correspond bien. C’est <span class="emphasis"><em>STATELESS</em></span>!
</li></ul></div><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
avec Spring/JWT : <a class="ulink" href="http://technicalrex.com/2015/02/20/stateless-authentication-with-spring-security-and-jwt" target="_top">http://technicalrex.com/2015/02/20/stateless-authentication-with-spring-security-and-jwt</a>
</li><li class="listitem">
<a class="ulink" href="http://stormpath.com/blog" target="_top">http://stormpath.com/blog</a>
</li><li class="listitem">
<a class="ulink" href="http://owasp.org" target="_top">http://owasp.org</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/dwyl/learn-json-web-tokens" target="_top">https://github.com/dwyl/learn-json-web-tokens</a>
</li><li class="listitem">
<a class="ulink" href="http://jwt.io" target="_top">http://jwt.io</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_faire_découvrir_la_programmation_aux_enfants_un_atelier_à_la_fois"></a>8. Faire découvrir la programmation aux enfants, un atelier à la fois</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/REU-5654/Faire_decouvrir_la_programmation_aux_enfants,_un_atelier_a_la_fois" target="_top">http://cfp.devoxx.fr/2016/talk/REU-5654/Faire_decouvrir_la_programmation_aux_enfants,_un_atelier_a_la_fois</a>
</li></ul></div><p>Il n’y a pas de slide, c'était principalement des démos d’outils et robots qui sont présentés aux enfants. Ca donne vraiment envie d’y accompagner les enfants, entre Scratch, Thymio, des cartes Arduino à personnaliser, il y en a pour tous les âges !</p><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Devoxx4kids : <a class="ulink" href="http://www.devoxx4kids.org/france/" target="_top">http://www.devoxx4kids.org/france/</a>
</li><li class="listitem">
Pixees, plein de ressources intéressantes et éprouvées : <a class="ulink" href="https://pixees.fr/" target="_top">https://pixees.fr/</a>
</li><li class="listitem">
Scratch : <a class="ulink" href="https://scratch.mit.edu/" target="_top">https://scratch.mit.edu/</a>
</li><li class="listitem">
Thymio : <a class="ulink" href="https://www.thymio.org/fr:thymio" target="_top">https://www.thymio.org/fr:thymio</a>
</li><li class="listitem">
Arduino : <a class="ulink" href="https://www.arduino.cc/" target="_top">https://www.arduino.cc/</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_elasticsearch_et_hibernate_sont_sur_un_bateau_8230"></a>9. Elasticsearch et Hibernate sont sur un bateau…</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/QVW-3514/Elasticsearch_et_Hibernate_sont_sur_un_bateau" target="_top">http://cfp.devoxx.fr/2016/talk/QVW-3514/Elasticsearch_et_Hibernate_sont_sur_un_bateau</a>
</li></ul></div><p>Les slides ne sont pas (encore) disponibles (suivre le compte Twitter <a class="ulink" href="https://twitter.com/dadoonet" target="_top">@dadoonet</a>), mais les deux orateurs ont montré comment Hibernate (en 5.6, pas encore sortie) permettait d’indexer automatiquement dans Elasticsearch les entités persistées en base.</p><p>Et comment il permettait de récupérer des entités depuis Elasticsearch sans s’embêter avec des transformations manuelles.</p><p>Une info intéressante a été lâchée lors de ce talk :</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>Elasticsearch 5.0 proposera un client REST officiel</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
entendu à DevoxxFR 2016...
</span></td></tr></table></div><p>Cela facilitera la maintenance et la compatiblité multi-versions (l’API REST étant moins mouvante que l’API interne).</p><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Article de blog sur le sujet : <a class="ulink" href="http://in.relation.to/2016/02/29/HibernateSearchAlpha-Elasticsearch/" target="_top">http://in.relation.to/2016/02/29/HibernateSearchAlpha-Elasticsearch/</a>
</li><li class="listitem">
Doc officielle concernant l’intégration d’Elasticsearch dans Hibernate : <a class="ulink" href="https://docs.jboss.org/hibernate/search/5.6/reference/en-US/htmlwn" target="_top">https://docs.jboss.org/hibernate/search/5.6/reference/en-US/htmlwn</a> ou Textile). Cette plateforme est open-source et simple à utiliser. De nombreux projets open-source (petits ou grands) l’ont adopté pour réduire les difficultés rencontrées lors de la rédaction ou la maintenance de leur documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_comment_asciidoctor_peut_vous_aider_pour_votre_doc"></a>10. Comment Asciidoctor peut vous aider pour votre doc</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/HCH-2449/Comment%20Asciidoctor%20peut%20vous%20aider%20pour%20votre%20doc" target="_top">http://cfp.devoxx.fr/2016/talk/HCH-2449/Comment%20Asciidoctor%20peut%20vous%20aider%20pour%20votre%20doc</a>
</li></ul></div><p>Asciidoctor permet d’importer des lignes de code directement depuis le code, putôt que copier/coller le code depuis le source. Via l’instruction include qui va chercher le tag correspondant commenté dans le code source. Cela permet une synchronisation entre le source et la doc (si le source est modifiée la doc le sera automatiquement).
On peut aussi inclure des fichiers asciidoc dans d’autres fichiers.</p><p>Asciidoc peut être édité avec n’importe quel éditeur de texte (eh oui !).</p><p>Il existe des <span class="emphasis"><em>plugin</em></span> pour <a class="ulink" href="https://addons.mozilla.org/fr/firefox/addon/asciidoctorjs-live-preview/" target="_top">Firefox</a> et <a class="ulink" href="https://chrome.google.com/webstore/detail/asciidoctorjs-live-previe/iaalpfgpbocpdfblpnhhgllgbdbchmia" target="_top">Chrome</a> permettant de rendre un fichier AsciiDoc directement tel qu’il serait après compilation.</p><p>La compilation Maven peut se faire nativement (dépendance asciidoc gen est-elle nécessaire ?)</p><p>Gitlab propose-t-il une intégration des asciidoc ? Apparemment, oui : <a class="ulink" href="https://github.com/gitlabhq/gitlabhq/pull/7569" target="_top">https://github.com/gitlabhq/gitlabhq/pull/7569</a></p><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://asciidoctor.org/news/2016/04/05/" target="_top">http://asciidoctor.org/news/2016/04/05/</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_the_eclipse_ide_the_force_awakens"></a>11. The Eclipse IDE: The Force Awakens</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/CEK-5422/The_Eclipse_IDE:_The_Force_Awakens" target="_top">http://cfp.devoxx.fr/2016/talk/CEK-5422/The_Eclipse_IDE:_The_Force_Awakens</a>
</li></ul></div><p>Tour d’horizon des nouveautés déjà présentes (version Mars, 2015) et à venir (version Neon, 2016) dans l’EDI Eclipse.</p><p>En termes de release, ils restent à 1 sortie majeure par an (juin), mais passent de 2 à 3 livraisons intermédiaires (septembre, <span class="strong"><strong>décembre</strong></span>, mars).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_neon_juin_2016"></a>11.1. Neon (juin 2016)</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Packaging Eclipse
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Installeur Eclipse (OOMPH) qui récupère la déclinaison d’Eclipse choisie par l’utilisateur, avec options disponbiles pour 8 des préférences les plus souvent modifiées par les utilisateurs
</li><li class="listitem">
Mise à jour des plugins à granularité plus fine (on pourra MàJ des modules spécifiques sans avoir à attendre la MàJ de tout le package)
</li><li class="listitem">
OSX : vraie application disponible
</li><li class="listitem">
Synchronisation des préférences Eclipse possible via un compte Eclipse à créer, serveur cible configurable
</li></ul></div></li><li class="listitem">
Hiérarchie Maven multi-module respectée dans la vue Navigator (option à specifier dans les paramètres de la vue)
</li><li class="listitem">
Moteur de theming désactivable pour limiter l’impact sur les performances
</li><li class="listitem">
Mode anti distraction présent
</li><li class="listitem">
GTK3 bien mieux géré dans Neon
</li><li class="listitem">
Mode word wrap dans l'éditeur de texte (à côté de l’option d’affichage des caractères invisibles) : permet sans modifier le source d’afficher une ligne du source sur plusieurs lignes
</li><li class="listitem">
Outil d’mport de projets amélioré, bien plus intuitif, reconnaît mieux les langages
</li><li class="listitem">
Tooling Git (support de GitFlow) depuis Mars
</li><li class="listitem">
Gestion des Hook (pre-commit/pre-push)
</li><li class="listitem">
Blocage des commit en cas d’erreur de compilation
</li><li class="listitem">
Gestion des .gitattributes
</li><li class="listitem">
Git FLS supporté !!
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_java_tooling"></a>11.2. Java Tooling</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Support Maven enfin correct
</li><li class="listitem">
Java 8 quick assist (convert to/from lambda/anonymous class), un peu comme le fait déjà IntelliJ Idea
</li><li class="listitem">
Amélioration de la détection des NullPointerException
</li><li class="listitem">
Complétion de code enfin en mode Match.Anywhere avec highlighting
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_web_tooling_neon"></a>11.3. Web tooling NEON</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
éditeur JSON
</li><li class="listitem">
Support ed EcmaScrit 6
</li><li class="listitem">
Chromium V8 Debugger intégré dans Eclipse
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_container_tooling"></a>11.4. Container tooling</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Docker explorer image
</li><li class="listitem">
Vagrant explorer
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_oxygen_juin_2017"></a>11.5. Oxygen (juin 2017)</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
améliorations de l’indexation interne JDT (concerne la complétion, le type hierarchy, etc.) icom/orevial/devoxx-microservices
</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_microservices_irl_ça_fonctionne_chez_un_client_on_vous_dit_comment"></a>12. Microservices IRL: ça fonctionne chez un client, on vous dit comment!</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/TSH-1394/Microservices%20IRL:%20%C3%A7a%20fonctionne%20chez%20un%20client,%20on%20vous%20dit%20comment" target="_top">http://cfp.devoxx.fr/2016/talk/TSH-1394/Microservices%20IRL:%20%C3%A7a%20fonctionne%20chez%20un%20client,%20on%20vous%20dit%20comment</a>!
</li></ul></div><p>Ce talk présentait un retour d’expérience sur la mise en place d’une architecture µ-services pour les fonctionnalités de recherche d’un site de e-commerce.</p><p>Ils ont suivi une approche itérative en améliorant petit à petit leur système en termes de couplage lâche et d’outils utilisés.</p><p>Bon, j’ai pas pu suivre la présentation jusqu’au bout du coup j’ai raté le plus gros, mais les slides et le code permettront de se saisir du message !</p><p>En tout cas leur gestion globale des microservices passe par un projet git unique et des modules Maven embarquant chacun une application Spring Boot. Ca tombe bien c’est l’approche qu’on a suivie pour notre interface unifiée (à l’exception du fait qu’il ne semble pas utiliser un pom parent spécifique), mais il y a certainement des astuces à prendre de leur code.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_hibernate_tu_connais_8230_mais_en_fait_tu_connais_pas"></a>13. Hibernate tu connais… mais en fait tu connais pas</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/MLX-6500/Hibernate_tu_connais…_mais_en_fait_tu_connais_pas" target="_top">http://cfp.devoxx.fr/2016/talk/MLX-6500/Hibernate_tu_connais…_mais_en_fait_tu_connais_pas</a>
</li></ul></div><p>Petit tour d’horizon de quelques nouveautés introduites avec la version à venir d’Hibernate (5.6), complète le talk avec Elasticsearch ci-dessus.</p><p>En vrac, quelques annotations utiles sont proposées :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">@Lazy</code> permet de ne pas charger directement une proporiété d’un POJO
</li><li class="listitem">
<code class="literal">@LazyGroup("groupName")</code> permet d’activer/désactiver le chargement Lazy pour un ensemble de propriétés d’un coup.
</li><li class="listitem">
<code class="literal">@GeneratedValue(strategy=UUID)</code> permet de générer des identifiants sous la forme d’UUID
</li></ul></div><p>Concernant les annotations permettant d’ineragir avec Elasticsearch :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">@Indexed</code> &lt;class&gt;
</li><li class="listitem">
<code class="literal">@Field</code> &lt;native property&gt;
</li><li class="listitem">
<code class="literal">@IndexedEmbedded</code> &lt;object property&gt;
</li></ul></div><p>Enfin…</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Hibernate fournit un DSL requête assez clair, notamment pour la construction des facettes.
</li><li class="listitem">
Hibernate OGM permet d’intégrer 4 SGBD NoSQL via JPA (MongoDB, Neo4j, EHcache, Infinispan), d’autres sont en développement.
</li><li class="listitem">
Hibernate Validator ⇒ JSR 303
</li><li class="listitem">
Support Java 8 : peut s’appliquer sur les éléments d’une collection ! Les validations peuvent se déclarer programmatiquement (sans passer par des Annotations statiques).
</li><li class="listitem">
Support des recherches spatiales spécifiques des SGBD relationnels (Postgis pour PostgreSQL).
</li></ul></div><p>D’autre part, la documentation a été grandement réécrite et améliorée, un gros travail a été effectué à ce niveau.</p><p>Comme déjà vu, Hibernate 5.6 final (à venir) supportera Elasticsearch : <a class="ulink" href="http://in.relation.to/2016/03/17/ThirdAlphaElasticsearch/" target="_top">http://in.relation.to/2016/03/17/ThirdAlphaElasticsearch/</a></p><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://in.relation.to/blog.atom" target="_top">http://in.relation.to/blog.atom</a>
</li><li class="listitem">
<a class="ulink" href="http://hibernate.org/ogm/" target="_top">http://hibernate.org/ogm/</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_jigsaw_est_là_pour_nous_sauver"></a>14. Jigsaw est là pour nous sauver</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/VBK-3044/Jigsaw_est_la_pour_nous_sauver" target="_top">http://cfp.devoxx.fr/2016/talk/VBK-3044/Jigsaw_est_la_pour_nous_sauver</a>
</li></ul></div><p>Présentation des nouveautés introduites par le projet Jigsaw à venir avec Java 9.</p><p>Rappel des problèmes actuels de la plateforme Java :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
ClassPath : scan linéaire provoquant des <a class="ulink" href="https://dzone.com/articles/what-is-jar-hell" target="_top">JAR hell</a>.
</li><li class="listitem">
Sécurité : pas de forte encapsulation, dés qu’une faille permet de passer outre la 1ere sécurité, l’accès est total, il n’y a pas de seconde barrière.
</li><li class="listitem">
Aucune garantie que ce qui fonctionne à la commpilation sera également fiable au runtime
</li></ul></div><p>Pour être adopté, Jigsaw doit êre compatible avec :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Maven/Gradle (à la compilation)
</li><li class="listitem">
JavaEE/JBoss modules/OSGI (à l’exécution)
</li></ul></div><p>C’est le syndrome du sandwich</p><p>JDEPS est un nouvel outil qui permet depuis un JAR de générer le graphe des dépendances de package (textuellement et graphiquement)</p><p>Solution proposée : modulariser les sources en modules ( 1 module = 1+ package)</p><p>Un module est déclaré via une classe module-info.java qui contient :</p><pre class="programlisting">module : fr.umlv.dragon.rt
{
        requires java.base; //optionnel
        exports fr.umlv.dragon.rt;
}</pre><p>Pour faciliter la migration, pour les jar non modularisés, un module peut être créé automatiquement par la plateforme lors de la compilation.</p><p>Le projet va ouvrir de nouvelles cibles pour la plateforme Java avec l’internet des objets vu la taille réduite des modules de la JVM.</p><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://openjdk.java.net/projects/jigsaw/quick-start" target="_top">http://openjdk.java.net/projects/jigsaw/quick-start</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_l_8217_odyssée_du_continuous_delivery"></a>15. L’odyssée du Continuous Delivery</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Talk : <a class="ulink" href="http://cfp.devoxx.fr/2016/talk/VWX-3520/L’odyssee_du_Continuous_Delivery" target="_top">http://cfp.devoxx.fr/2016/talk/VWX-3520/L’odyssee_du_Continuous_Delivery</a>
</li></ul></div><p>Retour d’expérience sur le passage d’une application monolithique à un SI davantage axé sur les microservices dans l’optique d’une livraison continue, impliquant 3 équipe (2 à Paris, 1 en Inde).</p><div class="warning" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Warning</h3><p>Leur stack d’origine : JSF, Rich Page, Oracle</p></div><p>D’après eux (et ça fait sens) :</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>la dette technique est un frein à la livraison continue !</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
eux
</span></td></tr></table></div><p>Ils ont choisi une approche de livraison en mode "release train" avec cohabitation de 2 modèles de livraison :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="emphasis"><em>legacy</em></span> :12 semaines de <span class="emphasis"><em>time to market</em></span>
</li><li class="listitem">
nouveau : 3 semaines de TTM
</li></ul></div><p>Pour les livraisons, selon les fonctionnalités, si seules les nouvelles applis sont impactées, alors la livraison se fait à 3 semaines. Si elles touchent les applications legacy, alors ça attendra la release train legacy.</p><p>Problème induit : certaines fonctionnalités sur le legacy n'étaient pas prête à la date de freeze : ça bloquait les passages.</p><p>Solution : msie en place d’un <span class="emphasis"><em>feature toggle</em></span> pour pousser le code en prod mais en desactivant le code.</p><p>Comment faire ? Commenter le code concerné (crade mais ça passe dans un 1er temps), ensuite, extraction des <span class="emphasis"><em>toggle features</em></span> dans des fichiers de propriétés (deployIt, solution Xebia).</p><p>Par contre, ils ont oublié de prendre en compte les spécificités d’environnement (du à l’extension des équipes : plus assez d’environnement de build pour tout le monde).
Solution, avec des environnements pour :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
intégration : chaque push entraine un déploiement
</li><li class="listitem">
homologation : chaque jour, les commit de la veille sont déployés
</li><li class="listitem">
UAT : 1 deploy / sprint avec les testeurs
</li><li class="listitem">
pré-prod
</li><li class="listitem">
production
</li></ul></div><p>Recrutement "2.0" :</p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>Il faut se concentrer sur la culture de dév plus que sur la technique : critères de qualité de code, TDD, etc.</p><p>Passer un Dojo de recrutement permet d'évaluer véritablement ces aspects.</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
eux
</span></td></tr></table></div><p>Pour aller plus loin :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Description du FeatureToggle pattern : <a class="ulink" href="http://martinfowler.com/bliki/FeatureToggle.html" target="_top">http://martinfowler.com/bliki/FeatureToggle.html</a>
</li><li class="listitem">
Outil facilitant la mise en place des Feature Toggles : <a class="ulink" href="http://www.togglz.org/documentation/overview.html" target="_top">http://www.togglz.org/documentation/overview.html</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_conclusion"></a>16. Conclusion</h2></div></div></div><p>Cette conférence était encore de très bonne facture ! Même lors des créneaux où je n’ai pas suivi de talk, les discussions avec les exposants étaient riches et intéressantes. A recommander !</p><p>N’hésitez pas à suivre le <a class="ulink" href="https://www.youtube.com/channel/UCsVPQfo5RZErDL41LoWvk0A" target="_top">compte Youtube de DevoxxFR</a> où seront publiées les vidéos de retransmission des talk, d’ici 1 à 2 mois.</p></div></div></body></html>